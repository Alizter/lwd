<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwd_seq (lwd.Lwd_seq)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">lwd</a> &#x00BB; Lwd_seq</nav><h1>Module <code>Lwd_seq</code></h1><h1 id="sequence-manipulation"><a href="#sequence-manipulation" class="anchor"></a>Sequence manipulation</h1><p><code>Lwd_seq</code> is an ordered collection with a pure interface. Changes to collections are easy to track.</p><p>A collection can be transformed with the usual map, filter and fold combinators. If the collection is updated, shared elements (in the sense of physical sharing), the result of the previous transformation will be reused for these elements.</p><p>The book-keeping overhead is O(n) in the number of changes, so O(1) per element.</p><nav class="toc"><ul><li><a href="#primitive-constructors">Primitive constructors</a></li><li><a href="#looking-at-sequence-contents">Looking at sequence contents</a></li><li><a href="#conversion-between-sequences,-lists-and-arrays">Conversion between sequences, lists and arrays</a></li><li><a href="#balanced-variant-of-sequences">Balanced variant of sequences</a></li><li><a href="#transforming-sequences">Transforming sequences</a></li><li><a href="#low-level-interface-for-observing-changes">Low-level interface for observing changes</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>+'a t</span></code></dt><dt class="spec type" id="type-seq"><a href="#type-seq" class="anchor"></a><code><span class="keyword">type</span> <span>+'a seq</span></code><code> = <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>The type of sequences</p></dd></dl><section><header><h2 id="primitive-constructors"><a href="#primitive-constructors" class="anchor"></a>Primitive constructors</h2></header><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>A sequence with no element.</p></dd></dl><dl><dt class="spec value" id="val-element"><a href="#val-element" class="anchor"></a><code><span class="keyword">val</span> element : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>A singleton sequence. The physical identity of the element is considered when reusing previous computations.</p><p>If you do:</p><pre><code class="ml">let x1 = element x
let x2 = element x</code></pre><p>Then <code>x1</code> and <code>x2</code> are seen as different elements and no sharing will be done during transformation.</p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>Concatenate two sequences into a bigger one. As for <code>element</code>, the physical identity of a sequence is considered for reuse.</p></dd></dl></section><section><header><h2 id="looking-at-sequence-contents"><a href="#looking-at-sequence-contents" class="anchor"></a>Looking at sequence contents</h2></header><dl><dt class="spec type" id="type-view"><a href="#type-view" class="anchor"></a><code><span class="keyword">type</span> <span>('a, 'b) view</span></code><code> = </code><table class="variant"><tr id="type-view.Empty" class="anchored"><td class="def constructor"><a href="#type-view.Empty" class="anchor"></a><code>| </code><code><span class="constructor">Empty</span></code></td></tr><tr id="type-view.Element" class="anchored"><td class="def constructor"><a href="#type-view.Element" class="anchor"></a><code>| </code><code><span class="constructor">Element</span> <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr><tr id="type-view.Concat" class="anchored"><td class="def constructor"><a href="#type-view.Concat" class="anchor"></a><code>| </code><code><span class="constructor">Concat</span> <span class="keyword">of</span> <span class="type-var">'b</span> * <span class="type-var">'b</span></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-view"><a href="#val-view" class="anchor"></a><code><span class="keyword">val</span> view : <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span>)</span> <a href="index.html#type-view">view</a></span></code></dt><dd><p>View how a sequence is defined</p></dd></dl></section><section><header><h2 id="conversion-between-sequences,-lists-and-arrays"><a href="#conversion-between-sequences,-lists-and-arrays" class="anchor"></a>Conversion between sequences, lists and arrays</h2></header><dl><dt class="spec value" id="val-transform_list"><a href="#val-transform_list" class="anchor"></a><code><span class="keyword">val</span> transform_list : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>Produce a sequence by transforming each element of a list and concatenating all results.</p></dd></dl><dl><dt class="spec value" id="val-transform_array"><a href="#val-transform_array" class="anchor"></a><code><span class="keyword">val</span> transform_array : <span><span class="type-var">'a</span> array</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>Produce a sequence by transforming each element of an array and concatenating all results.</p></dd></dl><dl><dt class="spec value" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span class="keyword">val</span> of_list : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>Produce a sequence from a list</p></dd></dl><dl><dt class="spec value" id="val-of_array"><a href="#val-of_array" class="anchor"></a><code><span class="keyword">val</span> of_array : <span><span class="type-var">'a</span> array</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span></code></dt><dd><p>Produce a sequence from an array</p></dd></dl><dl><dt class="spec value" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span class="keyword">val</span> to_list : <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dd><p>Produce a list from a sequence</p></dd></dl><dl><dt class="spec value" id="val-to_array"><a href="#val-to_array" class="anchor"></a><code><span class="keyword">val</span> to_array : <span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> array</span></code></dt><dd><p>Produce an array from a sequence</p></dd></dl></section><section><header><h2 id="balanced-variant-of-sequences"><a href="#balanced-variant-of-sequences" class="anchor"></a>Balanced variant of sequences</h2></header><div class="spec module" id="module-Balanced"><a href="#module-Balanced" class="anchor"></a><code><span class="keyword">module</span> <a href="Balanced/index.html">Balanced</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="transforming-sequences"><a href="#transforming-sequences" class="anchor"></a>Transforming sequences</h2></header><aside><p>All sequences live in <code>Lwd</code> monad: if a sequence changes slightly, parts that have not changed will not be re-transformed.</p></aside><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span>map:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span></span> <span>&#45;&gt;</span> <span>reduce:<span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> option</span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p><code>fold ~map ~reduce</code> transforms a sequence. If the sequence is non-empty, the <code>map</code> function is applied to element nodes and the <code>reduce</code> function is used to combine transformed concatenated nodes. If the sequence is empty, None is returned.</p></dd></dl><dl><dt class="spec value" id="val-fold_monoid"><a href="#val-fold_monoid" class="anchor"></a><code><span class="keyword">val</span> fold_monoid : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../Lwd_utils/index.html#type-monoid">Lwd_utils.monoid</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p>Like <code>fold</code>, but reduction and default value are defined by a <code>monoid</code></p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p><code>map f</code> transforms a sequence by applying <code>f</code> to each element.</p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p><code>filter p</code> transforms a sequence by keeping elements that satisfies <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val</span> filter_map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p>Filter and map elements at the same time</p></dd></dl><dl><dt class="spec value" id="val-lift"><a href="#val-lift" class="anchor"></a><code><span class="keyword">val</span> lift : <span><span><span><span class="type-var">'a</span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p>Remove a layer of <code>Lwd</code> inside a sequence.</p></dd></dl><dl><dt class="spec value" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span class="keyword">val</span> bind : <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span>)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p>Sequence forms a monad too...</p></dd></dl><dl><dt class="spec value" id="val-seq_bind"><a href="#val-seq_bind" class="anchor"></a><code><span class="keyword">val</span> seq_bind : <span><span><span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span>)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> <a href="index.html#type-seq">seq</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span></code></dt><dd><p>Sequence forms a monad too...</p></dd></dl><dl><dt class="spec value" id="val-monoid"><a href="#val-monoid" class="anchor"></a><code><span class="keyword">val</span> monoid : <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <a href="../Lwd_utils/index.html#type-monoid">Lwd_utils.monoid</a></span></code></dt><dd><p>Monoid instance for sequences</p></dd></dl><dl><dt class="spec value" id="val-lwd_monoid"><a href="#val-lwd_monoid" class="anchor"></a><code><span class="keyword">val</span> lwd_monoid : <span><span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <a href="../Lwd/index.html#type-t">Lwd.t</a></span> <a href="../Lwd_utils/index.html#type-monoid">Lwd_utils.monoid</a></span></code></dt><dd><p>Monoid instance for reactive sequences</p></dd></dl></section><section><header><h2 id="low-level-interface-for-observing-changes"><a href="#low-level-interface-for-observing-changes" class="anchor"></a>Low-level interface for observing changes</h2></header><div class="spec module" id="module-Reducer"><a href="#module-Reducer" class="anchor"></a><code><span class="keyword">module</span> <a href="Reducer/index.html">Reducer</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>